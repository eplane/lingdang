;if(typeof(easy_load_options)=="undefined"){function easy_load_options(id,name){var options=$("#"+id).data(name);options=(!!options?options.split(";"):undefined);var data=Object();if(!!options){var index;for(index in options){var temps=options[index];var p=temps.indexOf(":");var temp=[];if(-1==p){temp[0]=temps;temp[1]=""}else{temp[0]=temps.substring(0,p);temp[1]=temps.substring(p+1)}if(temp[0].length>0)data[temp[0]]=temp[1]}}return data}}(function($,window,document,undefined){var _easyform=function(ele,opt){this.form=ele;if(0==this.form.length&&"form"!=this.form[0].localName){throw new Error("easyform need a form !");}this.defaults={easytip:true};this.options=$.extend({},this.defaults,opt);this.result=[];this.inputs=[];this.counter=0;this.is_submit=true;this.success=null;this.error=null;this.per_validation=null};_easyform.prototype={init:function(){var $this=this;$this._load();this.submit_button=this.form.find("input:submit");this.submit_button.each(function(){var button=$(this);button.attr("type","button");button.click(function(){$this.submit(true)})});return this},_load:function(){for(var i in this.inputs){this.inputs[i].destructor()}this.inputs.splice(0,this.inputs.length);var $this=this;this.form.find("input:visible, textarea:visible").each(function(index,input){if(input.type!="hidden"&&input.type!="button"&&input.type!="submit"&&input.type!="file"){if(input.type=="radio"||input.type=="checkbox"){var name=input.name;for(index in $this.inputs){if(name==$this.inputs[index].input[0].name){return}}}var checker=$(input).easyinput({easytip:$this.options.easytip});checker.error=function(e,r){$this.is_submit=false;$this.result.push(e);if(!!$this.error)$this.error($this,e,r)};checker.success=function(e){$this.counter++;if($this.counter==$this.inputs.length){$this.counter=0;if(!!$this.success)$this.success($this);if(!!$this.is_submit){$this.form.submit()}}};$this.inputs.push(checker)}})},submit:function(submit){this._load();this.result.splice(0,this.result.length);this.counter=0;this.is_submit=submit;if(this.per_validation){this.is_submit=this.per_validation(this)}if(this.inputs.length==0){if(!!this.success)this.success();if(this.is_submit){this.form.submit()}}var index;for(index in this.inputs){this.inputs[index].validation()}}};$.fn.easyform=function(options){var validation=new _easyform(this,options);return validation.init()}})(jQuery,window,document);(function($,window,document,undefined){var _easyinput=function(input,opt){if(0==input.length){throw new Error("easyform need a input object !");}this.input=input;this.rules=[];this.error=null;this.success=null;this.defaults={"easytip":true,"real-time":false};this.tip=null;this.rules=easy_load_options(input[0].id,"easyform");var o=Object();for(var index in this.rules){if(index=="easytip"){o["easytip"]=this.rules[index]}else if(index=="real-time"){o["real-time"]=true}}delete this.rules["easytip"];delete this.rules["real-time"];this.options=$.extend({},this.defaults,opt,o);this.counter=0;this.is_error=false};_easyinput.prototype={init:function(){if(true===this.options.easytip){this.tip=$(this.input).easytip()}var $this=this;if(!!this.rules&&this.options["real-time"]){this.input.on("blur",function(){$this.validation()})}return this},validation:function(){this.value=this.input.val();this.counter=0;this.is_error=false;if(this.input.attr("type")=="radio"||this.input.attr("type")=="checkbox"){var name=this.input.attr("name");var v=$('input[name="'+name+'"]:checked').val();if(false==this._null(this,v,this.rules)){this._success()}}else if(false==this._null(this,this.value,this.rules)){for(var index in this.rules){if(!!this.judge[index])this.judge[index](this,this.value,this.rules[index])}if(Object.keys(this.rules).length==0){this._success()}}},_error:function(rule){if(!!this.error)this.error(this.input[0],rule);if(false==this.is_error){var msg=$(this.input).data("message-"+rule);if(!msg)msg=$(this.input).data("message");msg=!msg?"格式错误":msg;if(true===this.options.easytip){this.tip.show(msg)}this.is_error=true}return false},_success:function(){if(!!this.success)this.success(this.input);return true},_success_rule:function(rule){this.counter+=1;if(this.counter==Object.keys(this.rules).length)this._success();return true},_null:function(ei,v,r){if(!v){if(!!r&&typeof(r["null"])!="undefined"){return ei._success()}else{return ei._error("null")}}else{return false}},judge:{"char-normal":function(ei,v,p){if(false==/^\w+$/.test(v))return ei._error("char-normal");else return ei._success_rule("char-normal")},"char-chinese":function(ei,v,p){if(false==/^([\w]|[\u4e00-\u9fa5]|[ 。，、？￥“”‘’！：【】《》（）——.,?!$'":+-])+$/.test(v))return ei._error("char-chinese");else return ei._success_rule("char-chinese")},"char-english":function(ei,v,p){if(false==/^([\w]|[ .,?!$'":+-])+$/.test(v))return ei._error("char-english");else return ei._success_rule("char-english")},"email":function(ei,v,p){if(false==/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(v))return ei._error("email");else return ei._success_rule("email")},"length":function(ei,v,p){var range=p.split(" ");if(range.length==1)range[1]=range[0];var len=v.replace(/[^\x00-\xff]/g,"aa").length;if(len<range[0]||len>range[1])return ei._error("length");else return ei._success_rule("length")},"equal":function(ei,v,p){var pair=$(p);if(0==pair.length||pair.val()!=v)return ei._error("equal");else return ei._success_rule("equal")},"ajax":function(ei,v,p){ei.input.delegate("","easyform-ajax",function(e,p){ei.input.unbind("easyform-ajax");if(false==p)return ei._error("ajax");else return ei._success_rule("ajax")});eval(p)},"date":function(ei,v,p){if(false==/^(\d{4})-(\d{2})-(\d{2})$/.test(v))return ei._error("date");else return ei._success_rule("date")},"time":function(ei,v,p){if(false==/^(\d{2}):(\d{2}):(\d{2})$/.test(v))return ei._error("time");else return ei._success_rule(v)},"datetime":function(ei,v,p){if(false==/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/.test(v))return ei._error("datetime");else return ei._success_rule("datetime")},"money":function(ei,v,p){if(false==/^([1-9][\d]{0,10}|0)(\.[\d]{1,2})?$/.test(v))return ei._error("money");else return ei._success_rule("money")},"number":function(ei,v,p){if(false==/^\d{1,}$/.test(v))return ei._error("number");else return ei._success_rule("number")},"float":function(ei,v,p){var range=p.split(" ");if(range.length!=2){return ei._error("float")}else if(range[0]+range[1]>16){console.warn("您的"+ei.input.id+"float规则配置可能不正确!请保证整数位数+小数位数 < 16")}var pattern=new RegExp("^([1-9][\\d]{0,"+range[0]+"}|0)(\\.[\\d]{1,"+range[1]+"})?$");if(false==pattern.test(v))return ei._error("float");else return ei._success_rule("float")},"uint":function(ei,v,p){v=parseInt(v);var range=p.trim().split(" ");if(""==p.trim()){console.warn("您的"+ei.input.id+"uint规则，没有设置值域!");range[0]=0}if(range.length==1){range[1]=999999999999999}range[0]=parseInt(range[0]);range[1]=parseInt(range[1]);if(isNaN(v)||isNaN(range[0])||isNaN(range[1])||v<range[0]||v>range[1]||v<0)return ei._error("uint");else return ei._success_rule("uint")},"regex":function(ei,v,p){var pattern=new RegExp(p);if(false==pattern.test(v))return ei._error("regex");else return ei._success_rule("regex")}},destructor:function(){this.error=null;this.success=null;this.input.off("blur");delete this}};$.fn.easyinput=function(options){var check=new _easyinput(this,options);return check.init()}})(jQuery,window,document);(function($,window,document,undefined){var _easytip=function(ele,opt){this.parent=ele;if(0==this.parent.length){throw new Error("easytip's is null !");}this.defaults={left:0,top:0,position:"right",disappear:"other",speed:"fast",class:"easy-white",arrow:"bottom",onshow:null,onclose:null};this._fun_cache=Object();var data=easy_load_options(ele[0].id,"easytip");this.options=$.extend({},this.defaults,opt,data);this.id="easytip-div-main-"+ele[0].id};_easytip.prototype={init:function(){var tip=$("#"+this.id);if(tip.length==0){$(document.body).append("<div id=\""+this.id+"\"><div class=\"easytip-text\"></div></div>");tip=$("#"+this.id);var text=$("#"+this.id+" .easytip-text");tip.css({"text-align":"left","display":"none","position":"absolute","z-index":9000});text.css({"text-align":"left","padding":"10px","min-width":"120px"});tip.append("<div class=\"easytip-arrow\"></div>");var arrow=$("#"+this.id+" .easytip-arrow");arrow.css({"padding":"0","margin":"0","width":"0","height":"0","position":"absolute","border":"10px solid"})}return this},_size:function(){var parent=this.parent;var tip=$("#"+this.id);if(tip.width()>300){tip.width(300)}},_css:function(){var tip=$("#"+this.id);var text=$("#"+this.id+" .easytip-text");var arrow=$("#"+this.id+" .easytip-arrow");text.addClass(this.options.class);arrow.css("border-color","transparent transparent transparent transparent");tip.css("box-sizing","content-box")},_arrow:function(){var tip=$("#"+this.id);var text=$("#"+this.id+" .easytip-text");var arrow=$("#"+this.id+" .easytip-arrow");switch(this.options.arrow){case"top":arrow.css({"left":"25px","top":-arrow.outerHeight(),"border-bottom-color":text.css("borderTopColor")});break;case"left":arrow.css({"left":-arrow.outerWidth(),"top":tip.innerHeight()/2-arrow.outerHeight()/2,"border-right-color":text.css("borderTopColor")});break;case"bottom":arrow.css({"left":"25px","top":tip.innerHeight(),"border-top-color":text.css("borderTopColor")});break;case"right":arrow.css({"left":tip.outerWidth(),"top":tip.innerHeight()/2-arrow.outerHeight()/2,"border-left-color":text.css("borderTopColor")});break}},_position:function(){var tip=$("#"+this.id);var text=$("#"+this.id+" .easytip-text");var arrow=$("#"+this.id+" .easytip-arrow");var offset=$(this.parent).offset();var size={width:$(this.parent).outerWidth(),height:$(this.parent).outerHeight()};switch(this.options.position){case"top":tip.css("left",offset.left);tip.css("top",offset.top-tip.outerHeight()-arrow.outerHeight()/2);this.options.arrow="bottom";break;case"left":tip.css("left",offset.left-tip.outerWidth()-arrow.outerWidth()/2);tip.css("top",offset.top-(tip.outerHeight()-size.height)/2);this.options.arrow="right";break;case"bottom":tip.css("left",offset.left);tip.css("top",offset.top+size.height+arrow.outerHeight()/2);this.options.arrow="top";break;case"right":tip.css("left",offset.left+size.width+arrow.outerWidth()/2);tip.css("top",offset.top-(tip.outerHeight()-size.height)/2);this.options.arrow="left";break}var left=parseInt(tip.css("left"));var top=parseInt(tip.css("top"));tip.css("left",parseInt(this.options.left)+left);tip.css("top",parseInt(this.options.top)+top)},show:function(msg){var tip=$("#"+this.id);var text=$("#"+this.id+" .easytip-text");var arrow=$("#"+this.id+" .easytip-arrow");var speed=this.options.speed;var disappear=this.options.disappear;var parent=this.parent;text.html(msg);this._size();this._css();this._position();this._arrow();var $this=this;var onshow=this.options.onshow;var onclose=this.options.onclose;tip.fadeIn(speed,function(){if(!!onshow)onshow(parent,tip[0]);if(!isNaN(disappear)){setTimeout(function(){tip.fadeOut(speed,function(){if(!!onclose)onclose(parent,tip[0])})},disappear)}else if(disappear=="self"||disappear=="other"){$(document).bind('click',$this._fun_cache[tip[0].id]=function(e){if(disappear=="self"&&e.target==text[0]){tip.fadeOut(speed,function(){if(!!onclose)onclose(parent,tip[0]);$(document).unbind("click",$this._fun_cache[tip[0].id])})}else if(disappear=="other"&&e.target!=tip[0]){tip.fadeOut(speed,function(){if(!!onclose)onclose(parent,tip[0]);$(document).unbind("click",$this._fun_cache[tip[0].id])})}})}else if(disappear=="lost-focus"){$(parent).focusout(function(){tip.fadeOut(speed,function(){if(!!onclose)onclose(parent,tip[0]);$(parent).unbind("focusout")})})}})},close:function(){var tip=$("#"+this.id);var parent=this.parent;var onclose=this.options.onclose;tip.fadeOut(this.options.speed,function(){if(!!onclose)onclose(parent,tip[0])})}};$.fn.easytip=function(options){var tip=new _easytip(this,options);return tip.init()}})(jQuery,window,document);